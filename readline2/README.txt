With readline2 I would like to convert the whole readbuffer in one shot with MultibyteToWideChar().
Thought it would be a good idea to minimise these calls.

Unfortunatly it's a big mess of IF's. 
And complex.
And not working.

But go ahead. fork. :-)